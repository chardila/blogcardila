---
title: "BGGCard: Mi Componente Astro para Mostrar Juegos de Mesa"
description: "Un componente hecho por m√≠ para facilitar la creaci√≥n de posts sobre juegos de mesa usando datos directamente de BoardGameGeek."
publishDate: "2025-12-12"
tags: ["personal", "astro"]
---

import BGGCard from "@/components/BGGCard.astro";
import LightboxImage from "@/components/LightboxImage.astro";
import photo from '../../assets/images/BggCard.png';

<LightboxImage src={photo} alt="BGGCard" />

## ¬øPor qu√© hice este componente?

Los que me conocen saben que me encantan los juegos de mesa. Tengo una colecci√≥n grande (y creciendo üòÖ), y cada cierto tiempo me gusta escribir rese√±as o recomendaciones en el blog. Pero siempre me pasaba lo mismo: ten√≠a que copiar manualmente la informaci√≥n b√°sica del juego ‚Äîa√±o, jugadores, duraci√≥n, editorial, rating‚Äî desde BoardGameGeek. Y hacer eso una y otra vez es aburrido, propenso a errores, y sinceramente me quitaba las ganas de escribir.

As√≠ que decid√≠ crear **BGGCard**, un componente de Astro que se encarga de hacer *todo ese trabajo repetitivo por m√≠*. Solo le paso el ID del juego, y autom√°ticamente trae la informaci√≥n oficial desde la API de BoardGameGeek y la muestra en una tarjeta bonita y consistente. Esto me permite concentrarme en lo que realmente quiero escribir: mi experiencia con el juego y mis opiniones personales.


## ¬øQu√© es BGGCard?

**BGGCard** es un componente de Astro que te permite mostrar tarjetas interactivas con informaci√≥n detallada de juegos de mesa obtenida directamente de la API de [BoardGameGeek](https://boardgamegeek.com). Ideal para blogs, rese√±as o art√≠culos sobre juegos.

El componente se conecta a la API de BoardGameGeek, obtiene los datos del juego y los muestra en una tarjeta visualmente atractiva con toda la informaci√≥n relevante.

## Caracter√≠sticas Principales

‚ú® **Informaci√≥n Completa del Juego**
- Portada e imagen del juego
- T√≠tulo y a√±o de publicaci√≥n
- N√∫mero de jugadores (m√≠nimo y m√°ximo)
- Duraci√≥n de partida (en minutos)
- Edad recomendada
- Fabricante/Editorial
- Rating y evaluaciones de usuarios
- Nivel de complejidad
- Descripci√≥n completa del juego

üîÑ **Manejo Inteligente de API**
- Reintentos autom√°ticos cuando la API est√° procesando (HTTP 202)
- Polling exponencial para optimizar tiempos de respuesta
- Autenticaci√≥n requerida con token de Bearer

üé® **Dise√±o Responsive**
- Se adapta autom√°ticamente a todos los tama√±os de pantalla
- Tema claro/oscuro integrado con el blog
- Clases CSS personalizables

## Requisitos Previos

### 1. Token de BoardGameGeek (REQUERIDO)

El token es **obligatorio** para que el componente funcione. Sin √©l, la API de BoardGameGeek rechazar√° las solicitudes.

**Pasos para obtener tu token:**

1. Ve a https://boardgamegeek.com/application
2. Inicia sesi√≥n con tu cuenta de BoardGameGeek (crea una si no tienes)
3. Copia el token proporcionado
4. Config√∫ralo como variable de entorno `BGG_TOKEN`

**En `.env` o `.env.local`:**
```bash
BGG_TOKEN=tu_token_aqui
```

**Nota:** El token es personal y no debe compartirse p√∫blicamente. Mantenlo en variables de entorno, nunca en el c√≥digo fuente.

### 2. ID del Juego

Necesitas el ID del juego de BoardGameGeek. Puedes encontrarlo en la URL del juego:
- URL: `https://boardgamegeek.com/boardgame/174430/gloomhaven`
- ID: `174430`

## C√≥mo Usar el Componente

### Importar el Componente

En tu archivo `.mdx`:
```astro
import BGGCard from "@/components/BGGCard.astro";
```

### Sintaxis B√°sica

```astro
<BGGCard gameId="174430" />
```

### Con Clases CSS Personalizadas

```astro
<BGGCard
  gameId="174430"
  class="rounded-lg shadow-xl"
/>
```

## Ejemplos de Uso

### Ejemplo 1: Gloomhaven

A continuaci√≥n se muestra un ejemplo real del componente mostrando **Gloomhaven**, uno de los juegos de mesa m√°s populares:

<BGGCard gameId="174430" />

### Ejemplo 2: Catan (Los Colonos de Cat√°n)

Otro cl√°sico que siempre recomiendo:

<BGGCard gameId="13" />

### Ejemplo 3: Ticket to Ride

Un juego m√°s accesible y familiar:

<BGGCard gameId="9209" />

## Informaci√≥n Mostrada por el Componente

El componente muestra los siguientes datos del juego:

| Campo | Descripci√≥n |
|-------|-------------|
| **Imagen** | Portada o thumbnail del juego |
| **T√≠tulo y A√±o** | Nombre del juego y a√±o de publicaci√≥n |
| **Jugadores** | Rango de jugadores (ej: 1-4 Jugadores) |
| **Duraci√≥n** | Tiempo de juego en minutos |
| **Edad Recomendada** | Edad m√≠nima sugerida |
| **Fabricante** | Editorial/Fabricante |
| **Complejidad** | Escala de 0-5 seg√∫n BGG |
| **Rating** | Calificaci√≥n promedio de usuarios |
| **Usuarios que Votaron** | Cantidad de evaluaciones |
| **Descripci√≥n** | Sinopsis completa del juego |

## Personalizaci√≥n

### Aplicar Estilos Personalizados

Puedes pasar clases de Tailwind a trav√©s de la prop `class`:

```astro
<BGGCard
  gameId="174430"
  class="border-2 border-accent rounded-lg"
/>
```

### Manejo de Errores

El componente maneja autom√°ticamente varios escenarios:

- ‚ùå **Sin gameId**: Muestra mensaje de error
- ‚ùå **Sin token configurado**: Muestra error (token requerido)
- ‚ùå **Error de API**: Muestra mensaje de error descriptivo
- ‚è≥ **Cargando**: Muestra estado "Cargando informaci√≥n del juego..."

## Casos de Uso

üìù **Rese√±as de Juegos**: Incluye tarjetas en tus posts de rese√±as para mostrar informaci√≥n oficial

üéØ **Recomendaciones**: Destaca juegos recomendados con informaci√≥n completa

üìö **Colecciones**: Documenta tu colecci√≥n de juegos en el blog

üéì **Educativo**: Ense√±a sobre diferentes juegos y sus caracter√≠sticas

## C√≥mo Encontrar el C√≥digo

El c√≥digo fuente del componente est√° disponible en GitHub:

**Repositorio:** [https://github.com/chardila/blogcardila](https://github.com/chardila/blogcardila)

**Ruta del componente:**
```
blog/src/components/BGGCard.astro
```

**URL directa en GitHub:**
```
https://github.com/chardila/blogcardila/blob/master/blog/src/components/BGGCard.astro
```

## Caracter√≠sticas T√©cnicas

### Parsing XML sin Dependencias

El componente usa expresiones regulares para parsear XML sin necesidad de librer√≠as externas:

```typescript
const getAttr = (tag: string, attr: string): string | null => {
  const regex = new RegExp(`<${tag}[^>]*?${attr}=["']([^"']+)["']`, 'i');
  const match = xmlText?.match(regex);
  return match ? match[1] : null;
};
```

### Polling Autom√°tico

Cuando BoardGameGeek devuelve un HTTP 202 (queued), el componente reintentar autom√°ticamente:

```typescript
while (res.status === 202 && tries < 8) {
  await new Promise((r) => setTimeout(r, 1000 + tries * 500));
  res = await fetch(endpoint, { headers });
  tries += 1;
}
```

### Decodificaci√≥n de Entidades HTML

Las descripciones se limpian y decodifican autom√°ticamente:

```typescript
description = description
  .replace(/&amp;/g, '&')
  .replace(/&lt;/g, '<')
  .replace(/&quot;/g, '"')
  .replace(/<[^>]+>/g, '') // Remove HTML tags
  .trim();
```

## Ejemplo Completo en un Post

```astro
---
import BGGCard from "@/components/BGGCard.astro";
---

# Mi Juego Favorito: Gloomhaven

Gloomhaven es un juego de dungeon crawling incre√≠ble que...

<BGGCard gameId="174430" />

El componente anterior muestra la informaci√≥n oficial del juego.
```

## Soluci√≥n de Problemas

### "BGG_TOKEN env var not found"
**Soluci√≥n:** Este error indica que tu token no est√° configurado. Es obligatorio para que el componente funcione.
1. Obt√©n tu token en https://boardgamegeek.com/application
2. Config√∫ralo en `.env.local` o `.env` como `BGG_TOKEN=tu_token`
3. Reinicia el servidor de desarrollo

### "BGG API error: 401"
**Soluci√≥n:** Tu token es inv√°lido o ha expirado.
1. Verifica que has copiado el token completo y sin espacios
2. Obt√©n un nuevo token en https://boardgamegeek.com/application
3. Actualiza tu variable de entorno

### API retorna timeout
La API de BoardGameGeek puede ser lenta ocasionalmente. El componente reintentar autom√°ticamente hasta 8 veces antes de fallar. Si persiste, intenta m√°s tarde.

### Imagen no aparece
Algunos juegos no tienen imagen en BGG. El componente usa thumbnail como fallback autom√°ticamente.

## Conclusi√≥n

BGGCard es una forma elegante y eficiente de integrar informaci√≥n oficial de BoardGameGeek en tus posts sin tener que escribir manualmente todos los detalles de cada juego. Perfecto para bloggers que escriben sobre juegos de mesa.

¬øPreguntas o sugerencias? ¬°No dudes en revisar el c√≥digo en GitHub!
